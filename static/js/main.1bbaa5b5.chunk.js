(this.webpackJsonptest=this.webpackJsonptest||[]).push([[0],{26:function(e,t,n){},27:function(e,t,n){},28:function(e,t,n){},30:function(e,t,n){},36:function(e,t){},61:function(e,t,n){},62:function(e,t,n){},63:function(e,t,n){},64:function(e,t,n){},65:function(e,t,n){},66:function(e,t,n){"use strict";n.r(t);var c=n(1),s=n(20),o=n.n(s),a=(n(26),n(5)),i=n(10),l=n(3),r=(n(27),n(28),n(13));var d=function(e,t){var n,c=e.split(/\s+/),s=t.split(/\s+/),o=c.length,a=s.length,i=0,l=Object(r.a)(c);try{for(l.s();!(n=l.n()).done;){var d=n.value;if(s[0].toLowerCase()===d.toLowerCase()||1===a&&s[0].toLowerCase()===d.substr(0,s[0].length).toLowerCase()){console.log("true");for(var j=0,u=i;i<o&&j<a;){console.log(s[j]),console.log(c[u]);var b=s[j].length;if(s[j].toLowerCase()!==c[u].toLowerCase()&&(j!==a-1||s[j].toLowerCase()!==c[u].substr(0,b).toLowerCase()))break;j++,u++}if(j===a)return!0}i++}}catch(f){l.e(f)}finally{l.f()}return!1},j=n(0),u=function(e){var t=e.note,n=e.setIsEditorActive,c=e.setEditingNote,s=e.deleteNote;return Object(j.jsxs)("div",{onClick:function(){n(!0);var e={id:t.id,fmtext:t.fmtext,isEncrypted:t.isEncrypted,title:t.title};c(e)},className:"Note",children:[Object(j.jsx)("button",{className:"deleteCross",onClick:function(e){e.stopPropagation(),s(t.id)},children:"\xd7"}),Object(j.jsx)("div",{className:"titleSection",children:t.title}),Object(j.jsx)("div",{className:"noteSection",children:t.rawtext})]})},b=function(e){var t=e.notes,n=e.setIsEditorActive,c=e.setEditingNote,s=e.deleteNote,o=t.map((function(e){return Object(j.jsx)(u,{setIsEditorActive:n,note:e,setEditingNote:c,deleteNote:s},function(e){for(var t="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890".split(""),n=[],c=0;c<e;c++){var s=(Math.random()*(t.length-1)).toFixed(0);n[c]=t[s]}return n.join("")}(5))}));return Object(j.jsx)("div",{className:"Notes",children:o&&o.length>0?o:Object(j.jsx)("div",{className:"emptyMessage",children:"No notes here"})})},f=(n(30),n(21)),O=n.n(f),p=n(14),v=n.n(p),m=(n(61),function(e){var t=Object(c.useState)(""),n=Object(l.a)(t,2),s=n[0],o=n[1],a=Object(c.useState)({}),i=Object(l.a)(a,2),r=i[0],d=i[1],u=e.onSave,b=e.setIsoverlayActive,f=e.passwordNote,O=e.label,p=e.isInputJSON,v=function(e){p?(console.log(e.target.files[0]),d(e.target.files)):o(e.target.value)},m=Object(j.jsx)("input",{id:"fileUploadSingle",className:"fileUploadInput",accept:".json",type:"file",onChange:v});return Object(j.jsx)("div",{className:"PasswordOverlay",children:Object(j.jsxs)("div",{className:"passwordBox",children:[Object(j.jsxs)("div",{className:"passwordSection",children:[Object(j.jsxs)("label",{children:["".concat(O,": ")," "]}),p?m:Object(j.jsx)("input",{autoFocus:!0,type:"text",onChange:v})]}),f,Object(j.jsxs)("div",{className:"passwordButtons",children:[Object(j.jsx)("button",{onClick:function(){p&&0===r.length||!p&&0===s.length||(p?(console.log(r),u(r[0])):u(s),o(""),d({}))},className:"select",children:"OK \u2713"}),Object(j.jsx)("button",{onClick:function(){b(!1),o("")},className:"close",children:"Cancel \xd7"})]})]})})});n(62);var g=function(e){var t=e.options,n=e.state,c=t.map((function(e){return Object(j.jsxs)("button",{onClick:e.onclickEvent,className:"list",children:[Object(j.jsx)("span",{className:"icon",children:Object(j.jsx)("i",{className:"".concat(e.icon?"".concat(e.icon):"fa fa-circle")})}),Object(j.jsx)("span",{className:"name",children:e.name})]})}));return Object(j.jsx)("div",{className:"ExpandedOptions ".concat(n?"active":""),children:c})},h=(n(63),n(64),function(e){var t=e.setIsBaseOverlayActive,n=e.closeOverlayFn,c=e.OkOverlayFn;return Object(j.jsx)("div",{className:"Overlay",children:Object(j.jsxs)("div",{className:"Box",children:[e.children,Object(j.jsxs)("div",{className:"Buttons",children:[Object(j.jsx)("button",{onClick:c,className:"select",children:"OK \u2713"}),Object(j.jsx)("button",{onClick:function(){t(!1),n()},className:"close",children:"Cancel \xd7"})]})]})})});var x=function(e){var t=e.contentProps,n=t.setImageType,c=t.setFile,s=t.setImageURL,o=t.setURI;return Object(j.jsxs)("div",{className:"uploadSection",children:[Object(j.jsx)("label",{htmlFor:"",children:"Paste URL of image"}),Object(j.jsx)("input",{type:"text",onChange:function(e){s(e.target.value),n("url")}}),Object(j.jsx)("br",{}),Object(j.jsx)("br",{}),Object(j.jsxs)("div",{children:[Object(j.jsxs)("b",{children:[Object(j.jsx)("center",{children:"OR"})," "]})," "]}),Object(j.jsx)("br",{}),Object(j.jsx)("label",{htmlFor:"",children:"Choose image to upload"}),Object(j.jsx)("input",{type:"file",className:"uploadImageInput",accept:"image/*",onChange:function(e){var t;n("file");var s=null===(t=e.target.files)||void 0===t?void 0:t[0];c(s);var a=new FileReader;a.readAsDataURL(s),a.onload=function(){o(a.result)}}})]})},N=function(e){var t=Object(c.useState)(""),n=Object(l.a)(t,2),s=n[0],o=n[1],a=Object(c.useState)({}),i=Object(l.a)(a,2),r=i[0],d=i[1],u=Object(c.useState)(""),b=Object(l.a)(u,2),f=b[0],O=b[1],p=Object(c.useState)(""),v=Object(l.a)(p,2),m=v[0],g=v[1],N=e.setIsBaseOverlayActive,y=e.setExpandedOptionsVisibilityState,S=(e.range,e.setHtml),w={imageURL:s,setImageURL:o,file:r,setFile:d,imageType:m,setImageType:g,setURI:O};return Object(j.jsx)(h,{setIsBaseOverlayActive:N,closeOverlayFn:function(){N(!1),d({}),o(""),g(""),console.log("cancel upload")},OkOverlayFn:function(){var e="";console.log("okupload"),"url"===m?e='<img style="max-height: 350px;" src="'.concat(s,'" >'):"file"===m&&(e='<img style="max-height: 350px;" src="'.concat(f,'" >')),console.log("ihtml: ",e),S(e),N(!1),y(!1)},children:Object(j.jsx)(x,{contentProps:w})})},y="formatedNotes_single",S=function(e){var t=Object(c.useRef)(),n=Object(c.useState)(!1),s=Object(l.a)(n,2),o=s[0],r=s[1],d=Object(c.useState)(!1),u=Object(l.a)(d,2),b=u[0],f=u[1],p=Object(c.useState)(!1),h=Object(l.a)(p,2),x=h[0],y=h[1],S=Object(c.useState)({}),w=Object(l.a)(S,2),I=w[0],E=w[1],C=Object(c.useState)(""),k=Object(l.a)(C,2),A=k[0],R=k[1],L=Object(c.useState)(""),U=Object(l.a)(L,2),B=U[0],T=U[1],F=e.setIsEditorActive,D=e.isEditorActive,J=e.editingNote,P=e.setEditingNote,M=e.setNotes,H=e.notes,K=e.deleteNote,W=e.isBaseOverlayActive,_=e.setIsBaseOverlayActive,z=function(){var e=window.getSelection().getRangeAt(0).cloneRange();E(e)},V=Object(c.useState)("encrypt"),q=Object(l.a)(V,2),G=q[0],Q=q[1];Object(c.useEffect)((function(){Object.keys(J).length>0&&Q(J.isEncrypted?"decrypt":"encrypt")}),[J.isEncrypted]),Object(c.useEffect)((function(){D||y(!1)}),[D]),Object(c.useEffect)((function(){console.log("useeffect html: ",A),A&&A.length>5&&function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(console.log("html: ",e),window.getSelection){if(null===t&&(t=window.getSelection()),t.getRangeAt&&t.rangeCount){null===n&&(n=t.getRangeAt(0)),console.log("range: ",n),n.deleteContents();var c=document.createElement("div");c.innerHTML=e;for(var s,o,a=document.createDocumentFragment();s=c.firstChild;)o=a.appendChild(s);n.insertNode(a),o&&((n=n.cloneRange()).setStartAfter(o),n.collapse(!0),t.removeAllRanges(),t.addRange(n))}}else document.selection&&"Control"!=document.selection.type&&document.selection.createRange().pasteHTML(e)}(A,null,I)}),[A]);var X=function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"null",c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",o=/<\/*[^>]+>/g,a=Object(i.a)(H),l=a.findIndex((function(e){return e.id===J.id}));if("encrypt"===n){if(e="","encrypt"===s){if(void 0===c)return void console.log("some err");e=(e=c.split(o).join(" ")).replace(/&nbsp;/g," ")}t={id:J.id,fmtext:c,rawtext:e,isEncrypted:"decrypt"===s,title:J.title}}else"assignTitle"===n?t={id:J.id,fmtext:J.fmtext,rawtext:J.rawtext,isEncrypted:"decrypt"===s,title:c}:(e=(e=J.fmtext.split(o).join(" ")).replace(/&nbsp;/g," "),console.log("rawstring: ",e),t={id:J.id,fmtext:J.fmtext,rawtext:e,isEncrypted:"decrypt"===s,title:J.title});-1===l?a.push(t):a[l]=t,M(a)},Y=[{icon:"fa fa-trash",name:"Delete",onclickEvent:function(){F(!1),r(!1),K(J.id)}},{icon:"fa-solid fa-file-export",name:"Export",onclickEvent:function(){console.log("exportEach");var e=function(e,t){return t.find((function(t){return t.id===e.id}))}(J,H);if(e){var t=JSON.stringify({source:"formatedNotes_single",singleNote:e}),n=new Blob([t],{type:"text/json"}),c=URL.createObjectURL(n),s=document.createElement("a");s.download="exportNote".concat(e.id,".json"),s.href=c,s.click(),y(!1)}else alert("Make sure to save the current note first")}},{icon:"fa-solid fa-upload",name:"Upload Image",onclickEvent:function(){_(!0)}}],Z=J.title?J.title:"Untitled",$="decrypt"===G?"Locked":J.fmtext?J.fmtext:"";return Object(j.jsx)("div",{className:"EditorContainer ".concat(D?"active":""),children:Object(j.jsxs)("div",{className:"Editor ".concat(D?"active":""),children:[W?Object(j.jsx)(N,{setIsBaseOverlayActive:_,setExpandedOptionsVisibilityState:y,range:I,setHtml:R}):"",b?Object(j.jsx)(m,{label:"password"===B?"Password":"Title",passwordNote:"password"===B?"encrypt"===G?Object(j.jsxs)("div",{className:"passwordNote",children:[Object(j.jsx)("span",{children:"Note: "})," Make sure to remember the password. Only this password will be able to decrypt the current note."]}):Object(j.jsx)("div",{className:"passwordNote",children:"Type the password which you have used to encrypt this before to decrypt it."}):"title"===B?Object(j.jsx)("div",{className:"passwordNote",children:"Assign the current note a name or title to help to identify a note when its encrypted."}):Object(j.jsx)("div",{className:"passwordNote"}),onSave:"password"===B?function(e){var t,n,c=J.fmtext;if("encrypt"===G){n="decrypt";var s=function(e,t){return v.a.AES.encrypt(e,t)}(c,e).toString();t=s,P(Object(a.a)(Object(a.a)({},J),{},{fmtext:s}))}else{var o=function(e,t){return v.a.AES.decrypt(e,t).toString(v.a.enc.Utf8)}(c,e);if(0===o.length)return void alert("Wrong Password.Try again");n="encrypt",t=o,P(Object(a.a)(Object(a.a)({},J),{},{fmtext:o}))}f(!1),Q(n),X("encrypt",t,n)}:function(e){e.length>100?alert("Title is too long"):(f(!1),P(Object(a.a)(Object(a.a)({},J),{},{title:e})),X("assignTitle",e))},setIsoverlayActive:f}):"",Object(j.jsxs)("header",{className:"options",children:[Object(j.jsxs)("div",{className:"leftButtons",children:[Object(j.jsx)("button",{title:"Close current note",onClick:function(){F(!1),P({}),r(!1)},className:"close",children:"\xd7"}),Object(j.jsxs)("div",{className:"title",children:[Object(j.jsx)("span",{title:Z,children:Z}),Object(j.jsx)("button",{onClick:function(){T("title"),f(!0)},className:"editTitle",children:Object(j.jsx)("i",{class:"fa-solid fa-pencil"})})]})]}),Object(j.jsxs)("div",{className:"rightButtons",children:[Object(j.jsx)("button",{title:"Current note is in ".concat("decrypt"===G?"encrypted":"decrypted"," form. Click to ").concat(G," it."),onClick:function(){0!==J.fmtext.length?(T("password"),f(!0)):alert("Type something first")},className:"encrypt",children:Object(j.jsx)("i",{class:"fa fa-".concat("encrypt"===G?"lock-open":"lock"),"aria-hidden":"true"})}),Object(j.jsx)("button",{title:"Save current note",onClick:o?X:null,className:"save ".concat(o?"active":""),children:"\u2713"}),Object(j.jsx)("button",{onClick:function(){y(!x)},title:"Expand more options",className:"threedots",children:Object(j.jsx)("i",{class:"fa fa-ellipsis-v","aria-hidden":"true"})})]})]}),Object(j.jsx)("div",{className:"titleBar",children:Z}),Object(j.jsx)("div",{className:"article",children:Object(j.jsx)(O.a,{className:"edit",html:$,innerRef:t,onChange:function(e){P(Object(a.a)(Object(a.a)({},J),{},{fmtext:e.target.value})),r(!0)},onClick:z,onKeyPress:z})}),Object(j.jsx)(g,{state:x,options:Y})]})})},w=(n(65),function(e){var t=e.setIsSearching,n=e.notes,s=e.setSearchedNotes,o=Object(c.useState)(""),a=Object(l.a)(o,2),i=a[0],r=a[1];Object(c.useEffect)((function(){if(0!==n.length){if(0===i.length)return t(!1),void s([]);var e=n.filter((function(e){return"Untitled"!==(null===e||void 0===e?void 0:e.title)&&d(null===e||void 0===e?void 0:e.title,i)||d(null===e||void 0===e?void 0:e.rawtext,i)}));t(!0),s(e)}}),[i]);return Object(j.jsx)("div",{className:"search",children:Object(j.jsx)("input",{className:"searchInput",type:"text",placeholder:"Search notes",onChange:function(e){r(e.target.value)}})})});var I=function(){var e=Object(c.useState)([]),t=Object(l.a)(e,2),n=t[0],s=t[1],o=Object(c.useState)([]),r=Object(l.a)(o,2),d=r[0],u=r[1],f=Object(c.useState)(!1),O=Object(l.a)(f,2),p=O[0],v=O[1],g=Object(c.useState)("light"),h=Object(l.a)(g,2),x=h[0],N=h[1],I=Object(c.useState)(!1),E=Object(l.a)(I,2),C=E[0],k=E[1],A=Object(c.useState)({}),R=Object(l.a)(A,2),L=R[0],U=R[1],B=Object(c.useState)(0),T=Object(l.a)(B,2),F=T[0],D=T[1],J=Object(c.useState)(""),P=Object(l.a)(J,2),M=(P[0],P[1]),H=Object(c.useState)(!1),K=Object(l.a)(H,2),W=K[0],_=K[1],z=Object(c.useState)(!1),V=Object(l.a)(z,2),q=V[0],G=V[1],Q=Object(c.useState)(!1),X=Object(l.a)(Q,2),Y=X[0],Z=X[1],$=function(e){var t=Object(i.a)(n),c=t.findIndex((function(t){return t.id===e}));t.splice(c,1),s(t)},ee=function(e){var t="dark"===e?100:0,n=".App {\n      -webkit-filter: invert(".concat(t,"%);\n      -moz-filter: invert(").concat(t,"%);\n      -o-filter: invert(").concat(t,"%);\n      -ms-filter: invert(").concat(t,"%);\n    }\n\n    \n\n    \n    img,video,iframe{\n      -webkit-filter: invert(").concat(t,"%);\n      -moz-filter: invert(").concat(t,"%);\n      -o-filter: invert(").concat(t,"%);\n      -ms-filter: invert(").concat(t,"%);\n    }\n    \n    "),c=document.head,s=document.createElement("style");s.type="text/css",s.styleSheet?s.styleSheet.cssText=n:s.appendChild(document.createTextNode(n)),c.appendChild(s)};return Object(c.useEffect)((function(){var e=localStorage.getItem("notes");if(e&&e.length>0){var t=JSON.parse(e);s(t)}var n=localStorage.getItem("noteID");n?D(Number(n)):localStorage.setItem("noteID","0"),localStorage.getItem("source")||localStorage.setItem("source","formattedNotes")}),[]),Object(c.useEffect)((function(){var e=JSON.stringify(n);localStorage.setItem("notes",e),console.log("notes: ",n)}),[n]),Object(j.jsxs)("div",{className:"App",children:[Object(j.jsx)(w,{setIsSearching:v,notes:n,setSearchedNotes:u}),Object(j.jsx)(b,{setIsEditorActive:k,notes:p?d:n,setEditingNote:U,deleteNote:$}),W?Object(j.jsx)(m,{isInputJSON:!0,onSave:function(e){console.log("import_single: ",e);var t=new FileReader;t.onload=function(){var e=JSON.parse(t.result);if(console.log("importedFile: ",e),e.source&&e.source===y){var c=Object(a.a)(Object(a.a)({},e.singleNote),{},{id:F}),o=[].concat(Object(i.a)(n),[c]);s(o),D(F+1),localStorage.setItem("noteID",(F+1).toString())}else alert("Wrong file")},e&&t.readAsText(e),_(!1)},setIsoverlayActive:_,passwordNote:"Import the json file of a note to be imported",label:"Upload file"}):"",q?Object(j.jsx)(m,{isInputJSON:!0,onSave:function(e){console.log("import_all: ",e);var t=new FileReader;t.onload=function(){var e=JSON.parse(t.result);if(console.log("importedFile: ",e),e.source&&"formattedNotes"===e.source){var n=Object(i.a)(e.notes);s(n),localStorage.setItem("noteID",e.noteID)}else alert("Wrong file")},e&&t.readAsText(e),_(!1)},setIsoverlayActive:G,passwordNote:"Import the json file containing whole workspace",label:"Upload file"}):"",Object(j.jsx)("button",{title:"Export notes",className:"exportAll",onClick:function(){console.log("exportall");var e=localStorage.getItem("noteID"),t=localStorage.getItem("source"),c=JSON.stringify({noteID:e,source:t,notes:n}),s=new Blob([c],{type:"text/json"}),o=URL.createObjectURL(s),a=document.createElement("a");a.download="export.json",a.href=o,a.click()},children:Object(j.jsx)("i",{className:"fa-solid fa-file-export"})}),Object(j.jsx)("button",{onClick:function(){_(!0)},title:"Import single note",className:"importSingle",children:Object(j.jsx)("i",{class:"fa-solid fa-upload"})}),Object(j.jsx)("button",{onClick:function(){G(!0)},title:"Import all notes",className:"importAll",children:Object(j.jsx)("i",{class:"fa-solid fa-file-import"})}),Object(j.jsx)("button",{onClick:function(){k(!0),U({id:F,fmtext:"",isEncrypted:!1,title:"Untitled"}),D(F+1),localStorage.setItem("noteID",(F+1).toString())},className:"addNew",children:"+"}),Object(j.jsx)("button",{onClick:function(){"light"===x?(N("dark"),ee("dark")):(N("light"),ee("light"))},className:"toggleTheme",children:Object(j.jsx)("i",{class:"fa-solid fa-".concat("light"===x?"sun":"moon"),"aria-hidden":"true"})}),Object(j.jsx)(S,{editingNote:L,setEditingNote:U,isEditorActive:C,setIsEditorActive:k,notes:n,setNotes:s,deleteNote:$,isBaseOverlayActive:Y,setIsBaseOverlayActive:Z,setHtml:M})]})};o.a.render(Object(j.jsx)(I,{}),document.getElementById("root"))}},[[66,1,2]]]);
//# sourceMappingURL=main.1bbaa5b5.chunk.js.map