(this.webpackJsonptest=this.webpackJsonptest||[]).push([[0],{26:function(e,t,n){},27:function(e,t,n){},28:function(e,t,n){},30:function(e,t,n){},36:function(e,t){},61:function(e,t,n){},62:function(e,t,n){},63:function(e,t,n){},64:function(e,t,n){"use strict";n.r(t);var c=n(2),o=n(20),s=n.n(o),i=(n(26),n(5)),a=n(10),r=n(3),l=(n(27),n(28),n(13));var d=function(e,t){var n,c=e.split(/\s+/),o=t.split(/\s+/),s=c.length,i=o.length,a=0,r=Object(l.a)(c);try{for(r.s();!(n=r.n()).done;){var d=n.value;if(o[0].toLowerCase()===d.toLowerCase()||1===i&&o[0].toLowerCase()===d.substr(0,o[0].length).toLowerCase()){console.log("true");for(var j=0,u=a;a<s&&j<i;){console.log(o[j]),console.log(c[u]);var f=o[j].length;if(o[j].toLowerCase()!==c[u].toLowerCase()&&(j!==i-1||o[j].toLowerCase()!==c[u].substr(0,f).toLowerCase()))break;j++,u++}if(j===i)return!0}a++}}catch(b){r.e(b)}finally{r.f()}return!1},j=n(0),u=function(e){var t=e.note,n=e.setIsEditorActive,c=e.setEditingNote,o=e.deleteNote;return Object(j.jsxs)("div",{onClick:function(){n(!0);var e={id:t.id,fmtext:t.fmtext,isEncrypted:t.isEncrypted,title:t.title};c(e)},className:"Note",children:[Object(j.jsx)("button",{className:"deleteCross",onClick:function(e){e.stopPropagation(),o(t.id)},children:"\xd7"}),Object(j.jsx)("div",{className:"titleSection",children:t.title}),Object(j.jsx)("div",{className:"noteSection",children:t.rawtext})]})},f=function(e){var t=e.notes,n=e.setIsEditorActive,c=e.setEditingNote,o=e.deleteNote,s=t.map((function(e){return Object(j.jsx)(u,{setIsEditorActive:n,note:e,setEditingNote:c,deleteNote:o},function(e){for(var t="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890".split(""),n=[],c=0;c<e;c++){var o=(Math.random()*(t.length-1)).toFixed(0);n[c]=t[o]}return n.join("")}(5))}));return Object(j.jsx)("div",{className:"Notes",children:s&&s.length>0?s:Object(j.jsx)("div",{className:"emptyMessage",children:"No notes here"})})},b=(n(30),n(21)),p=n.n(b),O=n(14),m=n.n(O),v=(n(61),function(e){var t=Object(c.useState)(""),n=Object(r.a)(t,2),o=n[0],s=n[1],i=Object(c.useState)({}),a=Object(r.a)(i,2),l=a[0],d=a[1],u=e.onSave,f=e.setIsoverlayActive,b=e.passwordNote,p=e.label,O=e.isInputJSON,m=function(e){O?(console.log(e.target.files[0]),d(e.target.files)):s(e.target.value)},v=Object(j.jsx)("input",{id:"fileUploadSingle",className:"fileUploadInput",accept:".json",type:"file",onChange:m});return Object(j.jsx)("div",{className:"PasswordOverlay",children:Object(j.jsxs)("div",{className:"passwordBox",children:[Object(j.jsxs)("div",{className:"passwordSection",children:[Object(j.jsxs)("label",{children:["".concat(p,": ")," "]}),O?v:Object(j.jsx)("input",{autoFocus:!0,type:"text",onChange:m})]}),b,Object(j.jsxs)("div",{className:"passwordButtons",children:[Object(j.jsx)("button",{onClick:function(){O&&0===l.length||!O&&0===o.length||(O?(console.log(l),u(l[0])):u(o),s(""),d({}))},className:"select",children:"OK \u2713"}),Object(j.jsx)("button",{onClick:function(){f(!1),s("")},className:"close",children:"Cancel \xd7"})]})]})})});n(62);var h=function(e){var t=e.options,n=e.state,c=t.map((function(e){return Object(j.jsxs)("button",{onClick:e.onclickEvent,className:"list",children:[Object(j.jsx)("span",{className:"icon",children:Object(j.jsx)("i",{className:"".concat(e.icon?"".concat(e.icon):"fa fa-circle")})}),Object(j.jsx)("span",{className:"name",children:e.name})]})}));return Object(j.jsx)("div",{className:"ExpandedOptions ".concat(n?"active":""),children:c})},x="formatedNotes_single",g=function(e){var t=Object(c.useRef)(),n=Object(c.useState)(!1),o=Object(r.a)(n,2),s=o[0],l=o[1],d=Object(c.useState)(!1),u=Object(r.a)(d,2),f=u[0],b=u[1],O=Object(c.useState)(!1),x=Object(r.a)(O,2),g=x[0],N=x[1],y=Object(c.useState)(""),S=Object(r.a)(y,2),w=S[0],E=S[1],I=e.setIsEditorActive,k=e.isEditorActive,C=e.editingNote,A=e.setEditingNote,L=e.setNotes,T=e.notes,U=e.deleteNote,J=Object(c.useState)("encrypt"),D=Object(r.a)(J,2),B=D[0],R=D[1];Object(c.useEffect)((function(){Object.keys(C).length>0&&R(C.isEncrypted?"decrypt":"encrypt")}),[C.isEncrypted]),Object(c.useEffect)((function(){k||N(!1)}),[k]);var F=function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"null",c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",s=/<\/*[^>]+>/g,i=Object(a.a)(T),r=i.findIndex((function(e){return e.id===C.id}));if("encrypt"===n){if(e="","encrypt"===o){if(void 0===c)return void console.log("some err");e=(e=c.split(s).join(" ")).replace(/&nbsp;/g," ")}t={id:C.id,fmtext:c,rawtext:e,isEncrypted:"decrypt"===o,title:C.title}}else"assignTitle"===n?t={id:C.id,fmtext:C.fmtext,rawtext:C.rawtext,isEncrypted:"decrypt"===o,title:c}:(e=(e=C.fmtext.split(s).join(" ")).replace(/&nbsp;/g," "),console.log("rawstring: ",e),t={id:C.id,fmtext:C.fmtext,rawtext:e,isEncrypted:"decrypt"===o,title:C.title});-1===r?i.push(t):i[r]=t,L(i)},M=[{icon:"fa fa-trash",name:"Delete",onclickEvent:function(){I(!1),l(!1),U(C.id)}},{icon:"fa-solid fa-file-export",name:"Export",onclickEvent:function(){console.log("exportEach");var e=function(e,t){return t.find((function(t){return t.id===e.id}))}(C,T);if(e){var t=JSON.stringify({source:"formatedNotes_single",singleNote:e}),n=new Blob([t],{type:"text/json"}),c=URL.createObjectURL(n),o=document.createElement("a");o.download="exportNote".concat(e.id,".json"),o.href=c,o.click(),N(!1)}else alert("Make sure to save the current note first")}}],P=C.title?C.title:"Untitled",W="decrypt"===B?"Locked":C.fmtext?C.fmtext:"";return Object(j.jsx)("div",{className:"EditorContainer ".concat(k?"active":""),children:Object(j.jsxs)("div",{className:"Editor ".concat(k?"active":""),children:[f?Object(j.jsx)(v,{label:"password"===w?"Password":"Title",passwordNote:"password"===w?"encrypt"===B?Object(j.jsxs)("div",{className:"passwordNote",children:[Object(j.jsx)("span",{children:"Note: "})," Make sure to remember the password. Only this password will be able to decrypt the current note."]}):Object(j.jsx)("div",{className:"passwordNote",children:"Type the password which you have used to encrypt this before to decrypt it."}):"title"===w?Object(j.jsx)("div",{className:"passwordNote",children:"Assign the current note a name or title to help to identify a note when its encrypted."}):Object(j.jsx)("div",{className:"passwordNote"}),onSave:"password"===w?function(e){var t,n,c=C.fmtext;if("encrypt"===B){n="decrypt";var o=function(e,t){return m.a.AES.encrypt(e,t)}(c,e).toString();t=o,A(Object(i.a)(Object(i.a)({},C),{},{fmtext:o}))}else{var s=function(e,t){return m.a.AES.decrypt(e,t).toString(m.a.enc.Utf8)}(c,e);if(0===s.length)return void alert("Wrong Password.Try again");n="encrypt",t=s,A(Object(i.a)(Object(i.a)({},C),{},{fmtext:s}))}b(!1),R(n),F("encrypt",t,n)}:function(e){e.length>100?alert("Title is too long"):(b(!1),A(Object(i.a)(Object(i.a)({},C),{},{title:e})),F("assignTitle",e))},setIsoverlayActive:b}):"",Object(j.jsxs)("header",{className:"options",children:[Object(j.jsxs)("div",{className:"leftButtons",children:[Object(j.jsx)("button",{title:"Close current note",onClick:function(){I(!1),A({}),l(!1)},className:"close",children:"\xd7"}),Object(j.jsxs)("div",{className:"title",children:[Object(j.jsx)("span",{title:P,children:P}),Object(j.jsx)("button",{onClick:function(){E("title"),b(!0)},className:"editTitle",children:Object(j.jsx)("i",{class:"fa-solid fa-pencil"})})]})]}),Object(j.jsxs)("div",{className:"rightButtons",children:[Object(j.jsx)("button",{title:"Current note is in ".concat("decrypt"===B?"encrypted":"decrypted"," form. Click to ").concat(B," it."),onClick:function(){0!==C.fmtext.length?(E("password"),b(!0)):alert("Type something first")},className:"encrypt",children:Object(j.jsx)("i",{class:"fa fa-".concat("encrypt"===B?"lock-open":"lock"),"aria-hidden":"true"})}),Object(j.jsx)("button",{title:"Save current note",onClick:s?F:null,className:"save ".concat(s?"active":""),children:"\u2713"}),Object(j.jsx)("button",{onClick:function(){N(!g)},title:"Expand more options",className:"threedots",children:Object(j.jsx)("i",{class:"fa fa-ellipsis-v","aria-hidden":"true"})})]})]}),Object(j.jsx)("div",{className:"titleBar",children:P}),Object(j.jsx)("div",{className:"article",children:Object(j.jsx)(p.a,{className:"edit",html:W,innerRef:t,onChange:function(e){A(Object(i.a)(Object(i.a)({},C),{},{fmtext:e.target.value})),l(!0)}})}),Object(j.jsx)(h,{state:g,options:M})]})})},N=(n(63),function(e){var t=e.setIsSearching,n=e.notes,o=e.setSearchedNotes,s=Object(c.useState)(""),i=Object(r.a)(s,2),a=i[0],l=i[1];Object(c.useEffect)((function(){if(0!==n.length){if(0===a.length)return t(!1),void o([]);var e=n.filter((function(e){return"Untitled"!==(null===e||void 0===e?void 0:e.title)&&d(null===e||void 0===e?void 0:e.title,a)||d(null===e||void 0===e?void 0:e.rawtext,a)}));t(!0),o(e)}}),[a]);return Object(j.jsx)("div",{className:"search",children:Object(j.jsx)("input",{className:"searchInput",type:"text",placeholder:"Search notes",onChange:function(e){l(e.target.value)}})})});var y=function(){var e=Object(c.useState)([]),t=Object(r.a)(e,2),n=t[0],o=t[1],s=Object(c.useState)([]),l=Object(r.a)(s,2),d=l[0],u=l[1],b=Object(c.useState)(!1),p=Object(r.a)(b,2),O=p[0],m=p[1],h=Object(c.useState)("light"),y=Object(r.a)(h,2),S=y[0],w=y[1],E=Object(c.useState)(!1),I=Object(r.a)(E,2),k=I[0],C=I[1],A=Object(c.useState)({}),L=Object(r.a)(A,2),T=L[0],U=L[1],J=Object(c.useState)(0),D=Object(r.a)(J,2),B=D[0],R=D[1],F=Object(c.useState)(!1),M=Object(r.a)(F,2),P=M[0],W=M[1],_=Object(c.useState)(!1),z=Object(r.a)(_,2),K=z[0],q=z[1],G=function(e){var t=Object(a.a)(n),c=t.findIndex((function(t){return t.id===e}));t.splice(c,1),o(t)},H=function(e){var t="dark"===e?100:0,n=".App {\n      -webkit-filter: invert(".concat(t,"%);\n      -moz-filter: invert(").concat(t,"%);\n      -o-filter: invert(").concat(t,"%);\n      -ms-filter: invert(").concat(t,"%);\n    }\n\n    \n    img,video,iframe{\n      -webkit-filter: invert(").concat(t,"%);\n      -moz-filter: invert(").concat(t,"%);\n      -o-filter: invert(").concat(t,"%);\n      -ms-filter: invert(").concat(t,"%);\n    }\n    \n    "),c=document.head,o=document.createElement("style");o.type="text/css",o.styleSheet?o.styleSheet.cssText=n:o.appendChild(document.createTextNode(n)),c.appendChild(o)};return Object(c.useEffect)((function(){var e=localStorage.getItem("notes");if(e&&e.length>0){var t=JSON.parse(e);o(t)}var n=localStorage.getItem("noteID");n?R(Number(n)):localStorage.setItem("noteID","0"),localStorage.getItem("source")||localStorage.setItem("source","formattedNotes")}),[]),Object(c.useEffect)((function(){var e=JSON.stringify(n);localStorage.setItem("notes",e),console.log("notes: ",n)}),[n]),Object(j.jsxs)("div",{className:"App",children:[Object(j.jsx)(N,{setIsSearching:m,notes:n,setSearchedNotes:u}),Object(j.jsx)(f,{setIsEditorActive:C,notes:O?d:n,setEditingNote:U,deleteNote:G}),P?Object(j.jsx)(v,{isInputJSON:!0,onSave:function(e){console.log("import_single: ",e);var t=new FileReader;t.onload=function(){var e=JSON.parse(t.result);if(console.log("importedFile: ",e),e.source&&e.source===x){var c=Object(i.a)(Object(i.a)({},e.singleNote),{},{id:B}),s=[].concat(Object(a.a)(n),[c]);o(s),R(B+1),localStorage.setItem("noteID",(B+1).toString())}else alert("Wrong file")},e&&t.readAsText(e),W(!1)},setIsoverlayActive:W,passwordNote:"Import the json file of a note to be imported",label:"Upload file"}):"",K?Object(j.jsx)(v,{isInputJSON:!0,onSave:function(e){console.log("import_all: ",e);var t=new FileReader;t.onload=function(){var e=JSON.parse(t.result);if(console.log("importedFile: ",e),e.source&&"formattedNotes"===e.source){var n=Object(a.a)(e.notes);o(n),localStorage.setItem("noteID",e.noteID)}else alert("Wrong file")},e&&t.readAsText(e),W(!1)},setIsoverlayActive:q,passwordNote:"Import the json file containing whole workspace",label:"Upload file"}):"",Object(j.jsx)("button",{title:"Export notes",className:"exportAll",onClick:function(){console.log("exportall");var e=localStorage.getItem("noteID"),t=localStorage.getItem("source"),c=JSON.stringify({noteID:e,source:t,notes:n}),o=new Blob([c],{type:"text/json"}),s=URL.createObjectURL(o),i=document.createElement("a");i.download="export.json",i.href=s,i.click()},children:Object(j.jsx)("i",{className:"fa-solid fa-file-export"})}),Object(j.jsx)("button",{onClick:function(){W(!0)},title:"Import single note",className:"importSingle",children:Object(j.jsx)("i",{class:"fa-solid fa-upload"})}),Object(j.jsx)("button",{onClick:function(){q(!0)},title:"Import all notes",className:"importAll",children:Object(j.jsx)("i",{class:"fa-solid fa-file-import"})}),Object(j.jsx)("button",{onClick:function(){C(!0),U({id:B,fmtext:"",isEncrypted:!1,title:"Untitled"}),R(B+1),localStorage.setItem("noteID",(B+1).toString())},className:"addNew",children:"+"}),Object(j.jsx)("button",{onClick:function(){"light"===S?(w("dark"),H("dark")):(w("light"),H("light"))},className:"toggleTheme",children:Object(j.jsx)("i",{class:"fa-solid fa-".concat("light"===S?"sun":"moon"),"aria-hidden":"true"})}),Object(j.jsx)(g,{editingNote:T,setEditingNote:U,isEditorActive:k,setIsEditorActive:C,notes:n,setNotes:o,deleteNote:G})]})};s.a.render(Object(j.jsx)(y,{}),document.getElementById("root"))}},[[64,1,2]]]);
//# sourceMappingURL=main.728f6325.chunk.js.map